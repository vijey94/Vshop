{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vijay\\\\Desktop\\\\Projet Final\\\\front-end\\\\src\\\\components\\\\Panier.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useState } from \"react\";\nimport { state } from \"../Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Panier() {\n  _s();\n\n  let {\n    stateNavBar\n  } = useContext(state);\n  const [listProduit, setlistProduit] = useState([]);\n  const [listID, setlistID] = useState([]);\n  const [prixTotal, setprixTotal] = useState(0);\n  useEffect(() => {\n    fetch(\"/panier\", {\n      headers: {\n        Authorization: `Bearer ${stateNavBar}`\n      }\n    }).then(data => data.json()).then(resultat => setlistID(resultat.data)).catch(erreur => console.log(erreur));\n  }, [stateNavBar]);\n  useEffect(() => {\n    listID.forEach(id => {\n      fetch(`/panier/${id}`).then(data => data.json()).then(produit => setlistProduit(prev => [produit.data, ...prev])).catch(erreur => console.log(erreur));\n    });\n  }, [listID]);\n  useEffect(() => {\n    /* let listPrix = listProduit.map((produit) => produit.prix);\n    let resultat = listPrix.reduce((somme, prix) => (somme += prix), 0); */\n    let resultat = listProduit.reduce((somme, produit) => somme += produit.prix, 0);\n    setprixTotal(resultat);\n  }, [listProduit]);\n\n  const supprimerProduit = id => {\n    // /panier/:id -> DELETE\n    fetch(`/panier/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${stateNavBar}`\n      }\n    }).then(data => data.json()).then(resultat => {\n      let tmp = listProduit.filter(produit => produit._id !== id);\n      setlistProduit(tmp);\n    }).catch(erreur => console.log(erreur));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Page Panier\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), console.log(listProduit), listProduit.length === 0 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" Votre panier est vide ! \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : listProduit.map(produit => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"containerDetail\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: produit.photo,\n        alt: \"produit\",\n        className: \"imageDetail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"nomDetail\",\n          children: produit.nom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Prix: \", produit.prix, \" $\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Quantity: \", produit.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: produit.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => supprimerProduit(produit._id),\n        className: \"deleteAnnonce\",\n        children: \"Supprimer du panier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)]\n    }, produit._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Total: \", prixTotal, \" $\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Panier, \"y8OkI5CL4EibXb5U3vzvLFoGbOk=\");\n\n_c = Panier;\n\nvar _c;\n\n$RefreshReg$(_c, \"Panier\");","map":{"version":3,"names":["React","useEffect","useContext","useState","state","Panier","stateNavBar","listProduit","setlistProduit","listID","setlistID","prixTotal","setprixTotal","fetch","headers","Authorization","then","data","json","resultat","catch","erreur","console","log","forEach","id","produit","prev","reduce","somme","prix","supprimerProduit","method","tmp","filter","_id","length","map","photo","nom","quantity","description"],"sources":["C:/Users/vijay/Desktop/Projet Final/front-end/src/components/Panier.jsx"],"sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\nimport { state } from \"../Context\";\n\nexport default function Panier() {\n  let { stateNavBar } = useContext(state);\n  const [listProduit, setlistProduit] = useState([]);\n  const [listID, setlistID] = useState([]);\n  const [prixTotal, setprixTotal] = useState(0);\n\n  useEffect(() => {\n    fetch(\"/panier\", {\n      headers: { Authorization: `Bearer ${stateNavBar}` },\n    })\n      .then((data) => data.json())\n      .then((resultat) => setlistID(resultat.data))\n      .catch((erreur) => console.log(erreur));\n  }, [stateNavBar]);\n\n  useEffect(() => {\n    listID.forEach((id) => {\n      fetch(`/panier/${id}`)\n        .then((data) => data.json())\n        .then((produit) => setlistProduit((prev) => [produit.data, ...prev]))\n        .catch((erreur) => console.log(erreur));\n    });\n  }, [listID]);\n\n  useEffect(() => {\n    /* let listPrix = listProduit.map((produit) => produit.prix);\n    let resultat = listPrix.reduce((somme, prix) => (somme += prix), 0); */\n    let resultat = listProduit.reduce(\n      (somme, produit) => (somme += produit.prix),\n      0\n    );\n    setprixTotal(resultat);\n  }, [listProduit]);\n\n  const supprimerProduit = (id) => {\n    // /panier/:id -> DELETE\n    fetch(`/panier/${id}`, {\n      method: \"DELETE\",\n      headers: { Authorization: `Bearer ${stateNavBar}` },\n    })\n      .then((data) => data.json())\n      .then((resultat) => {\n        let tmp = listProduit.filter((produit) => produit._id !== id);\n        setlistProduit(tmp);\n      })\n      .catch((erreur) => console.log(erreur));\n  };\n\n  return (\n    <div>\n      <h1>Page Panier</h1>\n      {console.log(listProduit)}\n      {listProduit.length === 0 ? (\n        <h1> Votre panier est vide ! </h1>\n      ) : (\n        listProduit.map((produit) => (\n          <div className=\"containerDetail\" key={produit._id}>\n            <img src={produit.photo} alt=\"produit\" className=\"imageDetail\" />\n            <div>\n              <h1 className=\"nomDetail\">{produit.nom}</h1>\n              <b>Prix: {produit.prix} $</b>\n              <p>Quantity: {produit.quantity}</p>\n              <p>{produit.description}</p>\n            </div>\n            <button\n              onClick={() => supprimerProduit(produit._id)}\n              className=\"deleteAnnonce\"\n            >\n              Supprimer du panier\n            </button>\n          </div>\n        ))\n      )}\n      <h2>Total: {prixTotal} $</h2>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}